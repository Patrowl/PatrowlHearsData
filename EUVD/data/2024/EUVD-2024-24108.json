{"id": "EUVD-2024-24108", "enisaUuid": "4c841553-2f04-3751-9236-c6b57d053420", "description": "In the Linux kernel, the following vulnerability has been resolved:\n\nnvme-fc: do not wait in vain when unloading module\n\nThe module exit path has race between deleting all controllers and\nfreeing 'left over IDs'. To prevent double free a synchronization\nbetween nvme_delete_ctrl and ida_destroy has been added by the initial\ncommit.\n\nThere is some logic around trying to prevent from hanging forever in\nwait_for_completion, though it does not handling all cases. E.g.\nblktests is able to reproduce the situation where the module unload\nhangs forever.\n\nIf we completely rely on the cleanup code executed from the\nnvme_delete_ctrl path, all IDs will be freed eventually. This makes\ncalling ida_destroy unnecessary. We only have to ensure that all\nnvme_delete_ctrl code has been executed before we leave\nnvme_fc_exit_module. This is done by flushing the nvme_delete_wq\nworkqueue.\n\nWhile at it, remove the unused nvme_fc_wq workqueue too.", "datePublished": "2024-04-17T10:10:09", "dateUpdated": "2025-02-11T21:49:19", "baseScore": 4.4, "baseScoreVersion": "3.1", "baseScoreVector": "CVSS:3.1/AV:L/AC:L/PR:H/UI:N/S:U/C:N/I:N/A:H", "references": ["https://git.kernel.org/stable/c/4f2c95015ec2a1899161be6c0bdaecedd5a7bfb2", "https://git.kernel.org/stable/c/0bf567d6d9ffe09e059bbdfb4d07143cef42c75c", "https://git.kernel.org/stable/c/085195aa90a924c79e35569bcdad860d764a8e17", "https://git.kernel.org/stable/c/baa6b7eb8c66486bd64608adc63fe03b30d3c0b9", "https://git.kernel.org/stable/c/c0882c366418bf9c19e1ba7f270fe377a9bf5d67", "https://git.kernel.org/stable/c/70fbfc47a392b98e5f8dba70c6efc6839205c982"], "aliases": ["CVE-2024-26846"], "assigner": "Linux", "epss": 0.01, "enisaIdProduct": [{"id": "10250f7c-f6a4-332b-8114-799aa0cc1442", "product": {"name": "Linux"}, "product_version": "patch: 6.1.80"}, {"id": "10e2b6e3-c973-3a71-aceb-051aa4711a4a", "product": {"name": "Linux"}, "product_version": "patch: 6.8"}, {"id": "1be851fb-95b3-3b3e-a7f8-a5cdd1c94fba", "product": {"name": "Linux"}, "product_version": "1da177e4c3f41524e886b7f1b8a0c1fc7321cac2 <085195aa90a924c79e35569bcdad860d764a8e17"}, {"id": "2d6e94f8-fe95-33de-930b-23ed4858a14b", "product": {"name": "Linux"}, "product_version": "patch: 6.6.19"}, {"id": "72d07632-418d-39f0-91d1-f020e655de31", "product": {"name": "Linux"}, "product_version": "1da177e4c3f41524e886b7f1b8a0c1fc7321cac2 <0bf567d6d9ffe09e059bbdfb4d07143cef42c75c"}, {"id": "7b86ee02-efd2-3e61-9464-8ed2b3a55fd4", "product": {"name": "Linux"}, "product_version": "1da177e4c3f41524e886b7f1b8a0c1fc7321cac2 <4f2c95015ec2a1899161be6c0bdaecedd5a7bfb2"}, {"id": "8497d534-f9b0-3815-b061-b668061abfa6", "product": {"name": "Linux"}, "product_version": "patch: 5.10.211"}, {"id": "ad480f68-bf4f-340d-b89b-5ce1243b4f71", "product": {"name": "Linux"}, "product_version": "1da177e4c3f41524e886b7f1b8a0c1fc7321cac2 <baa6b7eb8c66486bd64608adc63fe03b30d3c0b9"}, {"id": "c263ed8e-f919-3f26-af62-2b5d0f21ea40", "product": {"name": "Linux"}, "product_version": "1da177e4c3f41524e886b7f1b8a0c1fc7321cac2 <70fbfc47a392b98e5f8dba70c6efc6839205c982"}, {"id": "c81ce00a-5641-3b84-8b80-c8e3394cde38", "product": {"name": "Linux"}, "product_version": "1da177e4c3f41524e886b7f1b8a0c1fc7321cac2 <c0882c366418bf9c19e1ba7f270fe377a9bf5d67"}, {"id": "db772c9c-a54c-307c-880f-24b0a2febc4c", "product": {"name": "Linux"}, "product_version": "patch: 5.15.150"}, {"id": "e9596ac4-90cf-30be-a7a9-6a43a46b7a32", "product": {"name": "Linux"}}, {"id": "fcd6c079-b697-3e1f-b692-c71d0a019d7a", "product": {"name": "Linux"}, "product_version": "patch: 6.7.7"}], "enisaIdVendor": [{"id": "e9596ac4-90cf-30be-a7a9-6a43a46b7a32", "vendor": {"name": "Linux"}}], "isExploited": false}